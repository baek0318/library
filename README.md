## ğŸ“– ë„ì„œê´€ ëŒ€ì¶œ ì‹œìŠ¤í…œ 
(2021.03.06 ~ 13)  
ì—¬ëŸ¬ ì±…ë“¤ì„ ë³´ê´€ì¤‘ì¸ ë„ì„œê´€ì—ì„œ ìœ ì €ê°€ ì±…ì„ ë¹Œë¦¬ê³  ê´€ë¦¬ìê°€ ì±…ë“¤ì„ ê´€ë¦¬í•˜ëŠ” ëŒ€ì¶œ ì‹œìŠ¤í…œ

> ë³¸ í”„ë¡œì íŠ¸ëŠ” TDDë¥¼ ì´ìš©í•˜ì—¬ ê·¸ë™ì•ˆ Pure Java í”„ë¡œê·¸ë¨ì„ ê°œë°œí•´ì™”ë˜ ë‘ í”„ë¡œì íŠ¸ì— ì´ì–´, MVC íŒ¨í„´ìœ¼ë¡œ í™•ì¥í•˜ì—¬ API í˜•ì‹ì˜ ì‹œìŠ¤í…œì„ ê°œë°œí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤. 

### Team1 Member
| ğŸ™â€â™‚ï¸ê¹€í˜œì¤€ | ğŸ™â€â™€ï¸ìš°í˜œì§„ |
| :----: | :----: |
| [@Kim-Hye-Jun](https://github.com/Kim-Hye-Jun) | [@HJ-Woo](https://github.com/HJ-Woo) |

### âœ” ìš”êµ¬ì‚¬í•­
- ìœ ì €ëŠ” ì•„ì´ë”” ë¹„ë°€ë²ˆí˜¸ë¡œ íšŒì›ê°€ì…ì„ ì§„í–‰í•  ìˆ˜ ìˆë‹¤
- ìœ ì €ëŠ” ì´ìš©ìì™€ ê´€ë¦¬ìë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤
- ê´€ë¦¬ìëŠ” ì±…ì„ ë“±ë¡ ì‚­ì œ ì¡°íšŒ ìˆ˜ì •ì´ ê°€ëŠ¥í•˜ë‹¤
- ì´ìš©ìëŠ” ë„ì„œê´€ì—ì„œ ì±…ì„ ë¹Œë¦´ ìˆ˜ ìˆë‹¤
- ì´ìš©ìëŠ” ìì‹ ì˜ ë¹Œë¦° ì±…ì˜ ëª©ë¡ì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤
- ì´ìš©ìëŠ” ìµœëŒ€ 5ê¶Œì˜ ì±…ì„ ë¹Œë¦´ ìˆ˜ ìˆë‹¤
  > ìš°ë¦¬ íŒ€ì€ ê´€ë¦¬ìë„ í¬í•¨í•˜ì—¬ Userê°€ ì±…ì„ ë¹Œë¦´ ìˆ˜ ìˆê²Œ ë§Œë“¤ì—ˆë‹¤.
- ë„ì„œê´€ì€ ì±…ì„ ì¤‘ë³µí•´ì„œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤
- ì±…ì€ í•œ ë„ì„œê´€ì—ë§Œ ì†í•  ìˆ˜ ìˆë‹¤
- ì±…ì€ ì œëª©ê³¼ ì‘ê°€ì™€ ë„ì„œ ë²ˆí˜¸ë¥¼ ê°€ì§„ë‹¤

### ğŸ›  ê¸°ìˆ ìŠ¤íƒ
- **Spring Boot** (2.4.3), **Java** (1.8), **Gradle**
- **Spring Data JPA**
- **H2 Database**
- **Lombok**
- **Test**: Mockito, TestRestTemplate
> ğŸ’â€â™€ï¸ ê¸°ìˆ  ìŠ¤íƒ ì„ ì • ì´ìœ   
> - Java ê¸°ë°˜ìœ¼ë¡œ MVC íŒ¨í„´ì„ ì ìš©í•œ APIë¥¼ ê°œë°œí•˜ê¸° ìœ„í•´ Spring Bootë¥¼ ì„ íƒ  
> 
> - OOPì— ì§‘ì¤‘í•˜ê³ ì Databaseë¡œì˜ ì ‘ê·¼ì€ ORMì„ ì´ìš©í•œ Spring JPAë¥¼, DBëŠ” embedded H2ë¥¼ ì‚¬ìš©
> 
> - Unit testë¥¼ ìœ„í•´ Mock&InjectMockë¥¼ ì‚¬ìš©, Integrate testë¥¼ ìœ„í•´ MockMvcì™€ RestTemplateì„ í™œìš© [ë‘˜ì˜ ì°¨ì´ì ](https://stackoverflow.com/questions/25901985/difference-between-mockmvc-and-resttemplate-in-integration-tests)
### Entity ë¶„ì„
  ![image](https://user-images.githubusercontent.com/59992230/111818053-176f5e00-8922-11eb-9ed9-a3a04944926a.png)

<details>
    <summary>ê°„ë‹¨í•œ ì„¤ëª…</summary>

Book  

ì–´ëŠ ë„ì„œê´€ì— ì†í•´ ìˆëŠ”ì§€, ë¹Œë ¤ì§„ ìƒíƒœì¸ì§€ ë„ì„œê´€ì— ìˆëŠ” ìƒíƒœì¸ì§€, ì±…ì˜ ê³ ìœ  ID, ì œëª©, ì €ìê°€ ë“±ë¡ ë˜ì–´ìˆë‹¤.

BorrowedBook  

ëˆ„ê°€ ë¹Œë ¤ê°”ëŠ”ì§€, ì–´ì œ ë¹Œë ¤ê°”ëŠ”ì§€, ë¹Œë¦°ì±…ì˜ ê³ ìœ ID, Bookì´ì—ˆì„ ë•Œì˜ Bookê°’ê³¼ í•¨ê»˜ ì €ì¥ë˜ì–´ìˆë‹¤.

Libary  

ì†Œìœ  ì±…ë¦¬ìŠ¤íŠ¸ê°€ ì €ì¥ë˜ì–´ìˆë‹¤.

User  

ì¶”ìƒí´ë˜ìŠ¤ë¡œ ë˜ì–´ìˆëŠ”ë° ì¸í„°í˜ì´ìŠ¤ë¡œ í–ˆì„ë•Œ @Entityë¡œ ë“±ë¡ì´ ë˜ì§€ ì•Šì•„ ì¶”ìƒí´ë˜ìŠ¤ë¡œ ë§Œë“¤ì—ˆê³  Member,Adminì´ êµ¬í˜„ë˜ë„ë¡ í•œë‹¤. ID,PW,ì´ë¦„ì´ ìˆë‹¤.

Admin  

ê´€ë¦¬ìì´ë‹¤.

Member  

ì´ìš©ìì´ë‹¤.  
</details>  
    
    
### API document
  **User**
  |Function|URL|Method|
  |--------|---|------|
  |íšŒì›ê°€ì…|/join|POST|

  **Book**
  |Function|URL|Method|
  |--------|---|------|
  |ì±… ë“±ë¡|/book/new|POST|
  |ì±… ì‚­ì œ|/book/delete|POST|
  |ì±… ìˆ˜ì •|/book/update|POST|
  |íŠ¹ì • ì±… ì¡°íšŒ|/book/find/{bookTitle}|GET|

  **Borrow**
  |Function|URL|Method|
  |--------|---|------|
  |ì±… ë¹Œë¦¬ê¸°|/book/borrow|POST|
  |ë¹Œë¦° ì±… ëª©ë¡ ì¡°íšŒ|/book/borrows|GET|

### âœ issue
- JPAëŠ” Interfaceë¥¼ Entityë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê¹Œ?
 [ì°¸ê³ ë§í¬](https://stackoverflow.com/questions/2912988/persist-collection-of-interface-using-hibernate/2918468#2918468)  
  <details>
    <summary>ìì„¸íˆ</summary>

  > ì´ìš©ìì™€ ê´€ë¦¬ìê°€ ê³µí†µì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ë¡œì§ì„ ì„¤ê³„í•  ë•Œ Userë¥¼ interfaceë¥¼ í™œìš©í•˜ë ¤ í–ˆìœ¼ë‚˜, JPA annotationì€ Interfaceì—ì„œ ì§€ì›í•˜ì§€ ì•Šì•„ ì‚¬ìš©í•  ìˆ˜ ì—†ì—ˆë‹¤.  
  TABLE_PER_CLASS ìƒì† ì „ëµê³¼ Userë¥¼ ì¶”ìƒ ì—”í‹°í‹°ë¡œ í™œìš©í•˜ì—¬ í•´ë‹¹ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ë‹¤.
  </details>

- ``@RequestBody``ì™€ ``@RequestParam``ì€ ì™œ ë™ì‹œì— íŒŒë¼ë¯¸í„°ë¡œ ë°›ì„ ìˆ˜ ì—†ì„ê¹Œ? [ì°¸ê³ ë§í¬](https://stackoverflow.com/questions/19468572/spring-mvc-why-not-able-to-use-requestbody-and-requestparam-together)
  <details>
    <summary>ìì„¸íˆ</summary>

  > í•´ë‹¹ ë§í¬ì—ì„œ ì†Œê°œëœ ë°”ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.  
  > 1. request bodyë¥¼ ``@RequestBody`` ì–´ë…¸í…Œì´ì…˜ì— ë§µí•‘
  > 2. request bodyì˜ request paramì„ ``@RequestParam``ì— ë§µí•‘
  >
  > 1, 2 ìˆœì„œë¡œ paramterê°€ ì²˜ë¦¬ë˜ëŠ”ë°, 2ë²ˆì„ ìˆ˜í–‰í•  ë•Œ ì´ë¯¸ requestë¥¼ ì½ì–´ì„œ query stringì•ˆì— request paramterê°€ ì—†ê±°ë‚˜ reqeust bodyì— ë‚¨ì•„ìˆëŠ” í•­ëª©ì´ ì—†ê¸° ë•Œë¬¸ì—, Handlerì— ì˜í•´ ì²˜ë¦¬ë  ìˆ˜ ì—†ë‹¤.
  >
  > ë°˜ëŒ€ë¡œ paramterì˜ ìˆœì„œë¥¼ ë°”ê¿”ì„œ 2, 1 ì´ ìˆ˜í–‰ë˜ë”ë¼ë„ ``@RequestParam``ì—ì„œ ë¨¼ì € ``HttpSerlvetRequest``ê³¼ ``InputStream``ì—ì„œ ë§µí•‘í•  ìˆ˜ ìˆëŠ”ê±¸ ì½ì–´ì˜¨ë‹¤. ê·¸ëŸ¬ë©´ 1ì„ ìˆ˜í–‰í•  ë•Œ request bodyì— ì•„ë¬´ê²ƒë„ ë‚¨ì•„ìˆì§€ ì•Šì•„ ì½ì–´ì˜¬ ìˆ˜ ì—†ë‹¤.
  </details>

- ``@RequestBody``ì—ì„œ jsonê³¼ ê°ì²´ê°€ ë§µí•‘ì´ ì•ˆë˜ëŠ” ë¬¸ì œ [ì°¸ê³ ë§í¬1](https://2ssue.github.io/programming/json-and-requestBody/), [ë§í¬2](https://bactoria.github.io/2019/08/16/ObjectMapper%EB%8A%94-Property%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%B0%BE%EC%9D%84%EA%B9%8C/)

  <details>
    <summary>ìì„¸íˆ</summary>

  > join ë¡œì§ ìˆ˜í–‰ì‹œ admin(ê´€ë¦¬ì)ì™€ ì‚¬ìš©ì(member)ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ê²ƒìœ¼ë¡œëŠ” ê°„ë‹¨íˆ isAdmin flagë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.
  > 
  > Testtemplateì„ ì‚¬ìš©í•œ ë¡œì§ìœ¼ë¡œëŠ” ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ë˜ì—ˆëŠ”ë°, Postmanì„ í†µí•´ ê°’ì„ ë³´ëƒˆë”ë‹ˆ í•œ ë§¤ê°œë³€ìˆ˜ë§Œ ë§µí•‘ì´ ì•ˆë˜ëŠ” ë¬¸ì œê°€ ìƒê¸´ ê²ƒì´ë‹¤.
  >   ![image](https://user-images.githubusercontent.com/59992230/111805779-b0977800-8914-11eb-8bcc-08c50933ac17.png)
  >   ![image](https://user-images.githubusercontent.com/59992230/111805793-b4c39580-8914-11eb-8bfa-ede893c25e60.png)
  > 
  > í•´ë‹¹ ë§í¬ë¥¼ ì°¸ê³ í•œ ê²°ê³¼, Springì—ì„œ Http ë©”ì„¸ì§€ì˜ í˜•ë³€í™˜ì€ ``HTTPMessageConverter`` [ë¬¸ì„œ](https://www.baeldung.com/spring-httpmessageconverter-rest)ì„ ì´ìš©í•˜ëŠ”ë°, ê·¸ì¤‘ì—ì„œë„ JSONì˜ í˜•ë³€í™˜ì„ ë‹´ë‹¹í•˜ëŠ” [MappingJackson2HttpMessageConverter](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/json/MappingJackson2HttpMessageConverter.html)ì˜ ``readJavaType``ì—ì„œëŠ” 
  ![image](https://user-images.githubusercontent.com/59992230/111808244-2d2b5600-8917-11eb-8451-d09a5b7f146e.png) ì´ì™€ê°™ì´
   [ObjectMapper](https://fasterxml.github.io/jackson-databind/javadoc/2.10/com/fasterxml/jackson/databind/ObjectMapper.html?is-external=true)ë¥¼ ì´ìš©í•œë‹¤.
   > 
   > ì ì¡°ê¸ˆë§Œ ë” íŒŒê³ ë“¤ì–´ë³´ì. ObjectMapper()ì—ì„œëŠ” ConfigOverrides()ë¥¼ í˜¸ì¶œí•œë‹¤.
   > ![image](https://user-images.githubusercontent.com/59992230/111809623-86e05000-8918-11eb-9f1b-a39df9ee2e9d.png)
![image](https://user-images.githubusercontent.com/59992230/111809635-8a73d700-8918-11eb-828a-a1bb65ef8ead.png)
   > 
   > ë‹¤ìŒìœ¼ë¡œ ConfigOverrides()ì—ì„œëŠ” VisibilityCheckerì˜ defaultInstance()ë¥¼ í˜¸ì¶œí•œë‹¤.
   > ![image](https://user-images.githubusercontent.com/59992230/111809647-8e9ff480-8918-11eb-888a-be56a8584d0e.png)
   >
   > ì´ì œ ë‹¤ì™”ë‹¤! 
   > VisibilityCheckerì—ì„œëŠ” mappingì‹œ ì ‘ê·¼ì§€ì •ìì— ë”°ë¥¸ ê°ì²´ì˜ field ì ‘ê·¼ ê°€ëŠ¥ ë°©ë²•ì— ëŒ€í•´ ê¸°ìˆ í•˜ê³  ìˆë‹¤.
   > 
   > ![image](https://user-images.githubusercontent.com/59992230/111809663-92cc1200-8918-11eb-9f42-02ca8bef370b.png)
   > 
   | How access/Type | private | protected |  public |
   | :----: | :----: | :----: | :----: |
   | Creator | o | o | o |
   | Getter | x | x | o |
   | is-Getter | x | x | o |
   | Setter | o | o | o |
   | Field | x | x | o |
 
   > JoinDTOëŠ” ëª¨ë“  ì ‘ê·¼ìë¥¼ privateìœ¼ë¡œ ì„ ì–¸í•´ì£¼ì—ˆê³ , ìƒì„±ìë¡œ mappingí•˜ëŠ” ê²ƒì´ë‹¤.
   >   
   > ì—¥, ê·¼ë° ì´ë¯¸ @AllArgsConstructorë¡œ ë§µí•‘ë˜ëŠ”ê±° ì•„ë‹Œê°€? **ê·¸ë ‡ë‹¤!!!**  
   > ì•„ë‹ˆë€ê±¸ ì •ë¦¬í•˜ë‹¤ê°€ ë’¤ëŠ¦ê²Œ ê¹¨ë‹¬ì•˜ëŠ”ë°, ì •ë¦¬í•œê²Œ ì•„ê¹Œì›Œì„œ ì¼ë‹¨ ì ì–´ë³´ì•˜ë‹¤.  
   > **ì‹¤ì œë¡œ ì°¸ê³ í•´ì•¼í•˜ëŠ” ë§í¬**ëŠ” [ì´ê²ƒ](https://stackoverflow.com/questions/32270422/jackson-renames-primitive-boolean-field-by-removing-is) ì˜ **ë‘ë²ˆì§¸ ë‹µë³€**ì´ë‹¤. ì°¸ê³ ë¡œ Kotlinì—ì„œë„ ìœ ì‚¬í•œ í˜„ìƒìœ¼ë¡œ [í† ë¡ ](https://github.com/FasterXML/jackson-module-kotlin/issues/80)ì´ ì¼ì—ˆë‹¤.
   > 
   > ì •ë‹µì€ ë°”ë¡œë°”ë¡œ.... [MapperFeature](https://fasterxml.github.io/jackson-databind/javadoc/2.8/index.html?com/fasterxml/jackson/databind/MapperFeature.html)ì— ìˆì—ˆë‹¤.
   >
   > ![image](https://user-images.githubusercontent.com/59992230/111813917-2dc6eb00-891d-11eb-820b-9916d436fde0.png)
   > 
   > í‘œì¤€ ìë°” ë¹ˆ naming conventionì— ë”°ë¼ prefixê°€ 'is'ë¡œ ì‹œì‘í•˜ëŠ”ê±´ is getterë¡œ íŒë‹¨í•œë‹¤ê³  ë‚˜ì™€ìˆë‹¤. ì¦‰, isAdminìœ¼ë¡œ ë„˜ê¸¸ ê²½ìš°ì—”, ìë™ìœ¼ë¡œ getterë¡œ ìƒê°í•œë‹¤ëŠ” ê²ƒ. is prefixê°€ ë¶™ì–´ìˆëŠ” ê²½ìš°ì—” isë¥¼ ì œê±°í•œ í•„ë“œëª…ìœ¼ë¡œ ë§µí•‘ì„ ë°›ëŠ”ë‹¤.
   > ê³ ë¡œ isë¥¼ ì œê±°í•˜ê³  [ê´€ë ¨ë§í¬](https://stackoverflow.com/questions/12316321/true-or-false-into-boolean-using-jackson-json-parsing) mappingí•´ì¤„ ê²½ìš°ì—” ì •ìƒì ìœ¼ë¡œ ì‘ë™í•œë‹¤.
   >  
   > ![image](https://user-images.githubusercontent.com/59992230/111814789-3c61d200-891e-11eb-812b-b6f202078939.png)
   > ![image](https://user-images.githubusercontent.com/59992230/111814807-3ff55900-891e-11eb-9f7c-ffc8d795f626.png)
   > 
   > ë²ˆì™¸ë¡œ ``@JsonPropert("isAdmin")``ìœ¼ë¡œ ì¶”ê°€í•´ì¤˜ë„ ê°€ëŠ¥í•˜ë‹¤.  
   > ëª…ëª…ê·œì¹™ì— ê·¼ê±°í•´ì„œ isAdmin field ëª…ì€ adminìœ¼ë¡œ ë³€ê²½í•˜ì˜€ë‹¤.

</details>